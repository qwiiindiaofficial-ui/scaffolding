/* This file was generated by the Hex-Rays decompiler version 9.2.0.250908.
   Copyright (c) 2007-2021 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>

#include <stdarg.h>


//-------------------------------------------------------------------------
// Function declarations

#define __thiscall __cdecl // Test compile in C mode

void *__thiscall sub_40100A(void *this);
_DWORD __cdecl j_unknown_libname_14(_DWORD); // weak
_DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const, int); // idb
_DWORD __stdcall sub_401028(_DWORD); // weak
int __cdecl sub_401041(char *Format, char); // idb
int __stdcall sub_401050(char *Str); // idb
int __cdecl sub_401055(void *, void *Src, size_t Size); // idb
int __thiscall sub_40105A(_DWORD); // weak
void sub_401069();
int __stdcall sub_401073(char *Str); // idb
_DWORD __thiscall std::bad_array_new_length::bad_array_new_length(std::bad_array_new_length *__hidden this); // idb
int __cdecl sub_401087(int, char *Str); // idb
int __thiscall sub_401091(void *this);
_DWORD __thiscall std::exception::exception(std::exception *__hidden this, const struct std::exception *); // idb
void *__thiscall sub_4010AF(void *this);
int __cdecl sub_4010BE(_DWORD); // weak
int __cdecl sub_4010C3(char *Str); // idb
int __cdecl sub_4010E1(size_t Size); // idb
int __thiscall sub_4010EB(void *this);
void __cdecl __noreturn sub_4010F0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
void *__cdecl operator new(unsigned int, void *); // idb
int __cdecl std::numeric_limits<unsigned int>::max(_DWORD); // weak
void *__thiscall sub_401118(void *this);
int __cdecl sub_401122(void *Buf1, void *Buf2, size_t Size); // idb
_DWORD *__thiscall sub_401140(_DWORD *this);
void __cdecl operator delete(void *); // idb
int __thiscall sub_401154(_DWORD); // weak
void *__thiscall sub_401163(void *this, int);
int __thiscall sub_401172(_DWORD);
_DWORD __cdecl j_unknown_libname_1(_DWORD); // weak
int __thiscall sub_40118B(_DWORD); // weak
LONG __stdcall TopLevelExceptionFilter(struct _EXCEPTION_POINTERS *ExceptionInfo); // idb
_DWORD __stdcall sub_40119A(_DWORD); // weak
int __cdecl sub_4011AE(int, void *, int); // idb
int __thiscall sub_4011B3(_DWORD); // weak
int __cdecl sub_4011BD(void *, void *Src, size_t Size); // idb
void *sub_4011C2();
int __cdecl sub_4011C7(unsigned int);
int __thiscall sub_4011D1(_DWORD); // weak
int __thiscall sub_4011DB(_DWORD); // weak
int __cdecl sub_4011EA(int, void *); // idb
int __thiscall sub_4011EF(_DWORD); // weak
int __thiscall sub_4011F9(void *this);
int __cdecl sub_401203(FILE *Stream, char *Format, _locale_t Locale, va_list ArgList); // idb
_DWORD __cdecl j_unknown_libname_4(_DWORD); // weak
void *__thiscall sub_40121C(void *this);
_DWORD *__thiscall sub_40122B(_DWORD *this);
int __thiscall sub_401230(_DWORD); // weak
_DWORD __cdecl j_unknown_libname_5(_DWORD); // weak
int __stdcall sub_40124E(void *, size_t Size, void *Src); // idb
_DWORD __cdecl sub_401258();
int __stdcall sub_401267(size_t Size, char, void *Src); // idb
int __cdecl sub_40126C(_DWORD); // weak
_DWORD __stdcall sub_401276(_DWORD); // weak
int __thiscall sub_40127B(_DWORD); // weak
int __cdecl sub_401280(void *); // idb
int __stdcall sub_40128F(char *Str); // idb
_DWORD __cdecl j_unknown_libname_8(_DWORD); // weak
_DWORD __cdecl sub_40129E(_DWORD);
int __thiscall sub_4012A3(_DWORD); // weak
int __thiscall sub_4012B2(void *this);
int __cdecl sub_4012BC(_DWORD); // weak
int __thiscall sub_4012DA(_DWORD); // weak
int __cdecl sub_4012DF(int, void *, int); // idb
void *__thiscall sub_4012E4(void *this);
int __cdecl std::_Allocate<8,std::_Default_allocate_traits,0>(size_t Size); // idb
_DWORD *__thiscall sub_40131B(_DWORD *this);
_DWORD __cdecl j_unknown_libname_9(_DWORD, _DWORD); // weak
void *__thiscall sub_401325(void *this, int);
_DWORD __cdecl j_unknown_libname_2(_DWORD); // weak
bool __thiscall sub_40135C(_DWORD *this);
void sub_401370();
void *__cdecl operator new(size_t Size); // idb
int __thiscall sub_40137F(_DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD __cdecl j_unknown_libname_3(_DWORD); // weak
_crt_argv_mode __cdecl j___get_startup_argv_mode();
int sub_401398();
int __cdecl std::_Deallocate<8,0>(void *, int); // idb
int __stdcall sub_4013A7(void *Src, size_t Size); // idb
int __cdecl sub_4013AC(_DWORD); // weak
_DWORD __cdecl j_unknown_libname_6(_DWORD); // weak
int __thiscall sub_4013B6(_DWORD); // weak
_DWORD __cdecl j_unknown_libname_7(_DWORD); // weak
_DWORD *__cdecl sub_4013C5(_DWORD *, _DWORD *);
int __cdecl j_unknown_libname_10(_DWORD, _DWORD); // weak
int __thiscall sub_4013CF(_DWORD); // weak
int __cdecl sub_4013D4(void *Buf1, size_t Size, void *Buf2, int); // idb
int __thiscall j_unknown_libname_15(_DWORD, _DWORD); // weak
int __stdcall sub_4013E3(void *, int); // idb
int __thiscall sub_4013F2(_DWORD); // weak
_DWORD *__thiscall sub_4013FC(_DWORD *this);
std::exception *__thiscall sub_401406(std::exception *this);
_DWORD *__cdecl sub_40141A(_DWORD *, _DWORD *);
_DWORD __stdcall sub_401438(_DWORD); // weak
int j____scrt_stub_for_initialize_mta_4(void); // weak
int __cdecl sub_401442(int, void *, int); // idb
int __thiscall sub_401447(_DWORD); // weak
int __stdcall sub_40144C(char *Str); // idb
int __stdcall sub_401460(struct std::exception *); // idb
int __cdecl main_0(int argc, const char **argv, const char **envp);
void *__thiscall sub_401C30(void *this, int a2);
void *__thiscall sub_401C70(void *this, int a2);
int __cdecl sub_401C90(int a1, char *Str); // idb
unsigned int __cdecl sub_401D00(unsigned int a1);
int __cdecl sub_401E80(int a1, void *a2); // idb
int __cdecl sub_401EC0(unsigned int a1);
_DWORD *__cdecl sub_401F10(_DWORD *a1, _DWORD *a2);
_DWORD *__cdecl sub_401F60(_DWORD *a1, _DWORD *a2);
void *__thiscall sub_401FB0(void *this, size_t Size, char a3, void *Src);
bool __cdecl sub_402140(void *Buf1, size_t Size, void *Buf2, int a4);
int __cdecl sub_4021E0(int a1, void *a2, int a3); // idb
int __cdecl sub_402230(int a1, void *a2, int a3); // idb
void sub_402290();
void sub_4022A0();
void *__thiscall sub_4022D0(void *this);
_DWORD *__thiscall sub_402370(_DWORD *this);
void *__thiscall sub_4023D0(void *this);
void *__thiscall sub_4023F0(void *this, char *Str);
void *__thiscall sub_402490(void *this);
_DWORD *__thiscall sub_402500(_DWORD *this);
_DWORD *__thiscall sub_402540(_DWORD *this);
_DWORD *__thiscall sub_402580(_DWORD *this);
void *__thiscall sub_4025C0(void *this);
_DWORD *__thiscall sub_4025E0(_DWORD *this);
_DWORD *__thiscall sub_402610(_DWORD *this);
int __thiscall sub_402650(void *this);
int __thiscall sub_402680(void *this);
int __thiscall sub_4026F0(void *this);
int __thiscall sub_402720(void *this);
int sub_402790();
void sub_4027C0();
int __stdcall sub_4027F0(char *Str); // idb
int __thiscall sub_402830(void *this, char *a2, size_t Size, void *Src);
void *__thiscall sub_4028A0(void *this, char a2);
int __cdecl sub_4028F0(_DWORD *a1, _DWORD *a2);
_DWORD **__thiscall sub_402A90(void *this);
void *__cdecl sub_402BA0(size_t Size);
int __thiscall sub_402BC0(void *this, int a2);
int __thiscall sub_402CC0(void *this, char *Str);
_DWORD *__thiscall sub_402D70(void *this);
int __thiscall sub_402E60(void *this);
int __thiscall sub_402E90(void *this);
void *__thiscall sub_402EC0(void *this);
void *__thiscall sub_402EE0(void *this);
void *__thiscall sub_402F00(void *this);
void *__thiscall sub_402F20(void *this);
void *__thiscall sub_402F40(void *this);
void *__thiscall sub_402F70(void *this);
bool __thiscall sub_402FA0(_DWORD *this);
int __thiscall sub_402FF0(void *this);
_DWORD *__thiscall sub_403020(_DWORD *this);
_DWORD *__thiscall sub_403090(_DWORD *this);
int __thiscall sub_403100(void *this);
void __thiscall sub_403140(_DWORD *this);
int __thiscall sub_403270(void *this);
int __thiscall sub_403370(void *this);
void __noreturn sub_403400(); // weak
int __stdcall sub_403440(int a1);
int __stdcall sub_403480(unsigned int a1);
int __stdcall sub_4034C0(char *Str); // idb
void *__thiscall sub_403510(void *this, void *Src, size_t Size);
int __thiscall sub_403600(void *this);
int __cdecl sub_403670(void *Buf1, void *Buf2, size_t Size); // idb
void *__cdecl sub_4036A0(void *a1, void *Src, size_t Size);
int __cdecl sub_4036D0(int a1, void *a2, int a3); // idb
int __stdcall sub_403700(void *a1, int a2); // idb
int __thiscall sub_403740(int this);
int __thiscall sub_403790(int this);
int __thiscall sub_4037E0(int this);
size_t __cdecl sub_403830(char *Str);
int __thiscall sub_403870(void *this);
int __fastcall sub_403960(char a1); // idb
void *__cdecl sub_4039A0(void *a1, void *Src, size_t Size);
int __fastcall sub_4039D0(char a1); // idb
void *sub_403A10();
int __cdecl sub_403A20(FILE *Stream, char *Format, _locale_t Locale, va_list ArgList); // idb
int sub_403A70(char *Format, ...);
// void __cdecl __noreturn std::_Xlength_error(const char *); idb
void __cdecl sub_403B60(void *a1);
void *sub_403DD0();
_DWORD *__thiscall sub_403E40(_DWORD *this);
_DWORD *__thiscall sub_403E60(_DWORD *this, char a2);
errno_t sub_404270();
int sub_404290();
std::exception *__thiscall sub_404370(std::exception *this, struct std::exception *a2);
std::exception *__thiscall sub_4043A0(std::exception *this);
_DWORD *__thiscall sub_4043D0(_DWORD *this, struct std::exception *a2);
int __thiscall sub_4044E0(void *this);
void *__thiscall sub_404530(void *this, char a2);
void *__thiscall sub_404570(void *this, char a2);
void __noreturn sub_4045F0(); // weak
void __noreturn sub_404620(); // weak
int sub_405310();
int sub_405320();
int __cdecl sub_405390(int a1);
void sub_405DF0();
void sub_405E70();
void sub_405E80();
void *sub_405E90();
void *sub_405F20();
void *sub_405F30();
int sub_406120();
LPTOP_LEVEL_EXCEPTION_FILTER sub_4061F0();
void *sub_4062C0();
void *sub_406300();
int __cdecl sub_4063A0(int a1);
// int __cdecl memcmp(const void *Buf1, const void *Buf2, size_t Size);
// void *__cdecl memcpy(void *, const void *Src, size_t Size);
// void *__cdecl memmove(void *, const void *Src, size_t Size);
// int __cdecl _RTDynamicCast(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// void __stdcall __noreturn CxxThrowException(void *pExceptionObject, _ThrowInfo *pThrowInfo);
// size_t __cdecl strlen(const char *Str);
// errno_t __cdecl configure_narrow_argv(_crt_argv_mode mode);
// int __cdecl initialize_narrow_environment();
// void __thiscall std::_Lockit::~_Lockit(std::_Lockit *__hidden this); weak
// _DWORD __thiscall std::_Lockit::_Lockit(std::_Lockit *__hidden this, _DWORD); weak
// int _CrtDbgReport(_DWORD, _DWORD, _DWORD, _DWORD, const char *, ...); weak
// int __cdecl _invalid_parameter(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak

//-------------------------------------------------------------------------
// Data declarations

// extern _UNKNOWN CrtDbgReportW; weak
void *Animal::`vftable' = &sub_4010A0; // weak
void *Bear::`vftable' = &sub_401311; // weak
void *Cat::`vftable' = &sub_401249; // weak
void *type_info::`vftable' = &sub_401136; // weak
void *std::bad_alloc::`vftable' = &sub_4011B8; // weak
void *std::bad_array_new_length::`vftable' = &sub_40130C; // weak
_UNKNOWN unk_40C120; // weak
_DWORD dword_40C324[66] =
{
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0
}; // weak
_UNKNOWN unk_40C42C; // weak
_DWORD dword_40C630[66] =
{
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0
}; // weak
const _ThrowInfo _TI2_AVbad_alloc_std__ = { 0u, &j_unknown_libname_15, NULL, &_CTA2_AVbad_alloc_std__ }; // idb
const _ThrowInfo _TI3_AVbad_array_new_length_std__ = { 0u, &sub_4011F9, NULL, &_CTA3_AVbad_array_new_length_std__ }; // idb
_UNKNOWN Animal `RTTI Type Descriptor'; // weak
_UNKNOWN Bear `RTTI Type Descriptor'; // weak
_UNKNOWN Cat `RTTI Type Descriptor'; // weak
_UNKNOWN unk_40D320; // weak
int dword_40D6EC; // weak
int dword_40D6F0; // weak
union _SLIST_HEADER ListHead; // idb
_UNKNOWN unk_40D738; // weak
_UNKNOWN unk_40D75C; // weak
_UNKNOWN unk_40D768; // weak
// extern void (__stdcall *InitializeSListHead)(PSLIST_HEADER ListHead);
// extern LPTOP_LEVEL_EXCEPTION_FILTER (__stdcall *SetUnhandledExceptionFilter)(LPTOP_LEVEL_EXCEPTION_FILTER lpTopLevelExceptionFilter);
// extern int (__cdecl *__stdio_common_vfprintf)(unsigned __int64 Options, FILE *Stream, const char *Format, _locale_t Locale, va_list ArgList);
// extern FILE *(__cdecl *__acrt_iob_func)(unsigned int Ix);


//----- (004018E0) --------------------------------------------------------
int __cdecl main_0(int argc, const char **argv, const char **envp)
{
  int v4; // [esp+10h] [ebp-84h]
  int v5; // [esp+14h] [ebp-80h]
  int v6; // [esp+1Ch] [ebp-78h]
  int v7; // [esp+20h] [ebp-74h]
  _DWORD *v8; // [esp+30h] [ebp-64h]
  char v9; // [esp+37h] [ebp-5Dh]
  _DWORD *v10; // [esp+38h] [ebp-5Ch]
  char v11; // [esp+3Fh] [ebp-55h]
  int v12; // [esp+40h] [ebp-54h]
  int v13; // [esp+44h] [ebp-50h]
  void (__thiscall ***v14)(_DWORD); // [esp+80h] [ebp-14h]

  if ( argc < 2 )
    return 1;
  v14 = 0;
  v7 = sub_401050((char *)argv[1]);
  v11 = sub_401087(v7, "bear");
  sub_401258();
  if ( v11 )
  {
    v10 = operator new(0x20u);
    if ( v10 )
    {
      *v10 = 0;
      v10[1] = 0;
      v10[2] = 0;
      v10[3] = 0;
      v10[4] = 0;
      v10[5] = 0;
      v10[6] = 0;
      v10[7] = 0;
      v6 = sub_4013CF(v10);
    }
    else
    {
      v6 = 0;
    }
    v14 = (void (__thiscall ***)(_DWORD))v6;
    sub_401073("luke bear-y");
  }
  v5 = sub_401050((char *)argv[1]);
  v9 = sub_401087(v5, "cat");
  sub_401258();
  if ( v9 )
  {
    v8 = operator new(0x20u);
    if ( v8 )
    {
      *v8 = 0;
      v8[1] = 0;
      v8[2] = 0;
      v8[3] = 0;
      v8[4] = 0;
      v8[5] = 0;
      v8[6] = 0;
      v8[7] = 0;
      v4 = sub_40118B(v8);
    }
    else
    {
      v4 = 0;
    }
    v14 = (void (__thiscall ***)(_DWORD))v4;
    sub_401073("hurricane cat-rina");
  }
  (**v14)(v14);
  v13 = _RTDynamicCast(v14, 0, &Animal `RTTI Type Descriptor', &Bear `RTTI Type Descriptor', 0);
  if ( v13 )
    (*(void (__thiscall **)(int))(*(_DWORD *)v13 + 4))(v13);
  v12 = _RTDynamicCast(v14, 0, &Animal `RTTI Type Descriptor', &Cat `RTTI Type Descriptor', 0);
  if ( v12 )
    (*(void (__thiscall **)(int))(*(_DWORD *)v12 + 4))(v12);
  if ( v14 )
    sub_401438(1);
  return 0;
}
// 40118B: using guessed type int __thiscall sub_40118B(_DWORD);
// 4013CF: using guessed type int __thiscall sub_4013CF(_DWORD);
// 401438: using guessed type _DWORD __stdcall sub_401438(_DWORD);
// 407235: using guessed type int __cdecl _RTDynamicCast(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (00401C30) --------------------------------------------------------
void *__thiscall sub_401C30(void *this, int a2)
{
  sub_4011DB(this);
  sub_401154(this);
  return this;
}
// 401154: using guessed type int __thiscall sub_401154(_DWORD);
// 4011DB: using guessed type int __thiscall sub_4011DB(_DWORD);

//----- (00401C70) --------------------------------------------------------
void *__thiscall sub_401C70(void *this, int a2)
{
  return this;
}

//----- (00401C90) --------------------------------------------------------
int __cdecl sub_401C90(int a1, char *Str)
{
  return sub_40144C(Str);
}

//----- (00401D00) --------------------------------------------------------
unsigned int __cdecl sub_401D00(unsigned int a1)
{
  int v2; // [esp+8h] [ebp-8h]
  size_t Size; // [esp+Ch] [ebp-4h]

  Size = a1 + 39;
  if ( a1 + 39 < a1 )
    Size = -1;
  v2 = sub_4010E1(Size);
  if ( !v2 )
  {
    if ( _CrtDbgReport(
           2,
           "C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\WDExpress\\VC\\Tools\\MSVC\\14.16.27023\\include\\xmemory0",
           101,
           0,
           "%s",
           "invalid argument") == 1 )
      __debugbreak();
    _invalid_parameter(
      L"\"invalid argument\"",
      L"std::_Allocate_manually_vector_aligned",
      L"C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\WDExpress\\VC\\Tools\\MSVC\\14.16.27023\\include\\xmemory0",
      101,
      0);
  }
  *(_DWORD *)(((v2 + 39) & 0xFFFFFFE0) - 4) = v2;
  *(_DWORD *)(((v2 + 39) & 0xFFFFFFE0) - 8) = -84215046;
  return (v2 + 39) & 0xFFFFFFE0;
}
// 40AB7C: using guessed type wchar_t aInvalidArgumen_0[19];
// 40AC30: using guessed type wchar_t aCProgramFilesX_0[105];
// 40AE00: using guessed type wchar_t aStdAllocateMan[39];
// 40E194: using guessed type int _CrtDbgReport(_DWORD, _DWORD, _DWORD, _DWORD, const char *, ...);
// 40E1A0: using guessed type int __cdecl _invalid_parameter(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (00401E80) --------------------------------------------------------
int __cdecl sub_401E80(int a1, void *a2)
{
  return sub_4011AE(a1, a2, 1);
}

//----- (00401EC0) --------------------------------------------------------
int __cdecl sub_401EC0(unsigned int a1)
{
  int v2; // [esp+0h] [ebp-8h]

  v2 = 8 * a1;
  if ( a1 > 0x1FFFFFFF )
    return -1;
  return v2;
}

//----- (00401F10) --------------------------------------------------------
_DWORD *__cdecl sub_401F10(_DWORD *a1, _DWORD *a2)
{
  if ( *a1 >= *a2 )
    return a1;
  else
    return a2;
}

//----- (00401F60) --------------------------------------------------------
_DWORD *__cdecl sub_401F60(_DWORD *a1, _DWORD *a2)
{
  if ( *a2 >= *a1 )
    return a1;
  else
    return a2;
}

//----- (00401FB0) --------------------------------------------------------
void *__thiscall sub_401FB0(void *this, size_t Size, char a3, void *Src)
{
  void *v4; // eax
  void *v5; // eax
  int v7[7]; // [esp+0h] [ebp-20h] BYREF
  void *v8; // [esp+1Ch] [ebp-4h]

  memset(v7, 204, sizeof(v7));
  v8 = this;
  if ( Size > sub_4013F2(this) )
    sub_4010F0(v7[0], v7[1], v7[2], v7[3], v7[4], v7[5], v7[6]);
  v7[6] = sub_4013B6(v8);
  v7[5] = *(_DWORD *)(v7[6] + 24);
  v7[4] = sub_401028(Size);
  v7[3] = sub_4012A3(v8);
  v7[1] = sub_40119A(v7[4] + 1);
  sub_40129E(v7[0]);
  *(_DWORD *)(v7[6] + 20) = Size;
  *(_DWORD *)(v7[6] + 24) = v7[4];
  v4 = (void *)j_unknown_libname_3(v7[1]);
  sub_40124E(v4, Size, Src);
  if ( v7[5] < 0x10u )
  {
    v5 = (void *)j_unknown_libname_5(v7[6] + 4);
    sub_4012DF(v7[3], v5, (int)&v7[1]);
  }
  else
  {
    sub_4013E3(*(void **)(v7[6] + 4), v7[5] + 1);
    *(_DWORD *)(v7[6] + 4) = v7[1];
  }
  return v8;
}
// 401028: using guessed type _DWORD __stdcall sub_401028(_DWORD);
// 4010F0: using guessed type void __cdecl __noreturn sub_4010F0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 40119A: using guessed type _DWORD __stdcall sub_40119A(_DWORD);
// 401235: using guessed type _DWORD __cdecl j_unknown_libname_5(_DWORD);
// 4012A3: using guessed type int __thiscall sub_4012A3(_DWORD);
// 401389: using guessed type _DWORD __cdecl j_unknown_libname_3(_DWORD);
// 4013B6: using guessed type int __thiscall sub_4013B6(_DWORD);
// 4013F2: using guessed type int __thiscall sub_4013F2(_DWORD);

//----- (00402140) --------------------------------------------------------
bool __cdecl sub_402140(void *Buf1, size_t Size, void *Buf2, int a4)
{
  return Size == a4 && !sub_401122(Buf1, Buf2, Size);
}

//----- (004021E0) --------------------------------------------------------
int __cdecl sub_4021E0(int a1, void *a2, int a3)
{
  int result; // eax
  _DWORD *v4; // [esp+0h] [ebp-4h]

  v4 = operator new(4u, a2);
  result = *(_DWORD *)j_unknown_libname_7(a3);
  *v4 = result;
  return result;
}
// 4013BB: using guessed type _DWORD __cdecl j_unknown_libname_7(_DWORD);

//----- (00402230) --------------------------------------------------------
int __cdecl sub_402230(int a1, void *a2, int a3)
{
  int *v3; // eax
  int v4; // edx
  int result; // eax
  _DWORD *v6; // [esp+0h] [ebp-4h]

  v6 = operator new(8u, a2);
  v3 = (int *)j_unknown_libname_8(a3);
  v4 = *v3;
  result = v3[1];
  *v6 = v4;
  v6[1] = result;
  return result;
}
// 401294: using guessed type _DWORD __cdecl j_unknown_libname_8(_DWORD);

//----- (00402290) --------------------------------------------------------
void sub_402290()
{
  ;
}

//----- (004022A0) --------------------------------------------------------
void sub_4022A0()
{
  ;
}

//----- (004022D0) --------------------------------------------------------
void *__thiscall sub_4022D0(void *this)
{
  sub_401163(this, 204);
  sub_401230(this);
  return this;
}
// 401230: using guessed type int __thiscall sub_401230(_DWORD);

//----- (00402370) --------------------------------------------------------
_DWORD *__thiscall sub_402370(_DWORD *this)
{
  sub_4011EF(this);
  sub_4012DA(this + 1);
  *(this + 5) = 0;
  *(this + 6) = 0;
  return this;
}
// 4011EF: using guessed type int __thiscall sub_4011EF(_DWORD);
// 4012DA: using guessed type int __thiscall sub_4012DA(_DWORD);

//----- (004023D0) --------------------------------------------------------
void *__thiscall sub_4023D0(void *this)
{
  return this;
}

//----- (004023F0) --------------------------------------------------------
void *__thiscall sub_4023F0(void *this, char *Str)
{
  sub_40100A(this);
  sub_4011B3(this);
  sub_40128F(Str);
  return this;
}
// 4011B3: using guessed type int __thiscall sub_4011B3(_DWORD);

//----- (00402490) --------------------------------------------------------
void *__thiscall sub_402490(void *this)
{
  sub_40100A(this);
  sub_4011B3(this);
  return this;
}
// 4011B3: using guessed type int __thiscall sub_4011B3(_DWORD);

//----- (00402500) --------------------------------------------------------
_DWORD *__thiscall sub_402500(_DWORD *this)
{
  *this = &Animal::`vftable';
  sub_4010AF(this + 1);
  return this;
}
// 40AD8C: using guessed type void *Animal::`vftable';

//----- (00402540) --------------------------------------------------------
_DWORD *__thiscall sub_402540(_DWORD *this)
{
  sub_4013FC(this);
  *this = &Bear::`vftable';
  return this;
}
// 40ADA8: using guessed type void *Bear::`vftable';

//----- (00402580) --------------------------------------------------------
_DWORD *__thiscall sub_402580(_DWORD *this)
{
  sub_4013FC(this);
  *this = &Cat::`vftable';
  return this;
}
// 40ADCC: using guessed type void *Cat::`vftable';

//----- (004025C0) --------------------------------------------------------
void *__thiscall sub_4025C0(void *this)
{
  return this;
}

//----- (004025E0) --------------------------------------------------------
_DWORD *__thiscall sub_4025E0(_DWORD *this)
{
  *this = 0;
  return this;
}

//----- (00402610) --------------------------------------------------------
_DWORD *__thiscall sub_402610(_DWORD *this)
{
  *this = 0;
  *(this + 1) = 0;
  return this;
}

//----- (00402650) --------------------------------------------------------
int __thiscall sub_402650(void *this)
{
  return sub_4012BC(this);
}
// 4012BC: using guessed type int __cdecl sub_4012BC(_DWORD);

//----- (00402680) --------------------------------------------------------
int __thiscall sub_402680(void *this)
{
  sub_40127B(this);
  return sub_4012B2(this);
}
// 40127B: using guessed type int __thiscall sub_40127B(_DWORD);

//----- (004026F0) --------------------------------------------------------
int __thiscall sub_4026F0(void *this)
{
  return sub_40126C(this);
}
// 40126C: using guessed type int __cdecl sub_40126C(_DWORD);

//----- (00402720) --------------------------------------------------------
int __thiscall sub_402720(void *this)
{
  sub_4011D1(this);
  return sub_401091(this);
}
// 4011D1: using guessed type int __thiscall sub_4011D1(_DWORD);

//----- (00402790) --------------------------------------------------------
int sub_402790()
{
  return sub_401258();
}

//----- (004027C0) --------------------------------------------------------
void sub_4027C0()
{
  ;
}

//----- (004027F0) --------------------------------------------------------
int __stdcall sub_4027F0(char *Str)
{
  return sub_40128F(Str);
}

//----- (00402830) --------------------------------------------------------
int __thiscall sub_402830(void *this, char *a2, size_t Size, void *Src)
{
  _DWORD v5[2]; // [esp+0h] [ebp-8h] BYREF

  HIBYTE(v5[0]) = 0;
  v5[1] = this;
  sub_4011BD(a2, Src, Size);
  return j_unknown_libname_9(&a2[Size], (char *)v5 + 3);
}
// 401320: using guessed type _DWORD __cdecl j_unknown_libname_9(_DWORD, _DWORD);

//----- (004028A0) --------------------------------------------------------
void *__thiscall sub_4028A0(void *this, char a2)
{
  sub_401398();
  if ( (a2 & 1) != 0 )
    sub_401280(this);
  return this;
}

//----- (004028F0) --------------------------------------------------------
int __cdecl sub_4028F0(_DWORD *a1, _DWORD *a2)
{
  int result; // eax
  _DWORD v3[4]; // [esp+4h] [ebp-10h] BYREF

  memset(v3, 204, sizeof(v3));
  *a2 += 39;
  v3[3] = *a1;
  v3[2] = *(_DWORD *)(v3[3] - 4);
  if ( *(_DWORD *)(v3[3] - 8) != -84215046 )
  {
    if ( _CrtDbgReport(
           2,
           "C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\WDExpress\\VC\\Tools\\MSVC\\14.16.27023\\include\\xmemory0",
           122,
           0,
           "%s",
           "invalid argument") == 1 )
      __debugbreak();
    _invalid_parameter(
      L"\"invalid argument\"",
      L"std::_Adjust_manually_vector_aligned",
      L"C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\WDExpress\\VC\\Tools\\MSVC\\14.16.27023\\include\\xmemory0",
      122,
      0);
  }
  v3[1] = 8;
  v3[0] = *a1 - v3[2];
  if ( v3[0] < 8u || v3[0] > 0x27u )
  {
    if ( _CrtDbgReport(
           2,
           "C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\WDExpress\\VC\\Tools\\MSVC\\14.16.27023\\include\\xmemory0",
           132,
           0,
           "%s",
           "invalid argument") == 1 )
      __debugbreak();
    _invalid_parameter(
      L"\"invalid argument\"",
      L"std::_Adjust_manually_vector_aligned",
      L"C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\WDExpress\\VC\\Tools\\MSVC\\14.16.27023\\include\\xmemory0",
      132,
      0);
  }
  result = v3[2];
  *a1 = v3[2];
  return result;
}
// 40AB7C: using guessed type wchar_t aInvalidArgumen_0[19];
// 40AC30: using guessed type wchar_t aCProgramFilesX_0[105];
// 40AD30: using guessed type wchar_t aStdAdjustManua[37];
// 40E194: using guessed type int _CrtDbgReport(_DWORD, _DWORD, _DWORD, _DWORD, const char *, ...);
// 40E1A0: using guessed type int __cdecl _invalid_parameter(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (00402A90) --------------------------------------------------------
_DWORD **__thiscall sub_402A90(void *this)
{
  int v1; // eax
  int v2; // eax
  int v3; // esi
  void **v4; // eax
  int v5; // eax
  int v6; // esi
  _DWORD **result; // eax
  _DWORD *v8; // [esp-4h] [ebp-20h]
  int v9[5]; // [esp+4h] [ebp-18h] BYREF
  void *v10; // [esp+18h] [ebp-4h]

  memset(v9, 204, sizeof(v9));
  v10 = this;
  v1 = sub_4012A3(this);
  sub_401325((char *)&v9[3] + 3, v1);
  v2 = sub_401276(1);
  v3 = j_unknown_libname_4(v2);
  *(_DWORD *)sub_401447(v10) = v3;
  v8 = sub_40131B(v9);
  v4 = (void **)sub_401447(v10);
  sub_401442((int)&v9[3] + 3, *v4, (int)v8);
  v5 = sub_4013B6(v10);
  v6 = j_unknown_libname_6(v5);
  result = (_DWORD **)sub_401447(v10);
  **result = v6;
  return result;
}
// 401208: using guessed type _DWORD __cdecl j_unknown_libname_4(_DWORD);
// 401276: using guessed type _DWORD __stdcall sub_401276(_DWORD);
// 4012A3: using guessed type int __thiscall sub_4012A3(_DWORD);
// 4013B1: using guessed type _DWORD __cdecl j_unknown_libname_6(_DWORD);
// 4013B6: using guessed type int __thiscall sub_4013B6(_DWORD);
// 401447: using guessed type int __thiscall sub_401447(_DWORD);

//----- (00402BA0) --------------------------------------------------------
void *__cdecl sub_402BA0(size_t Size)
{
  return operator new(Size);
}

//----- (00402BC0) --------------------------------------------------------
int __thiscall sub_402BC0(void *this, int a2)
{
  _DWORD v3[7]; // [esp+0h] [ebp-20h] BYREF
  void *v4; // [esp+1Ch] [ebp-4h]

  memset(v3, 204, sizeof(v3));
  v4 = this;
  v3[6] = sub_4013F2(this);
  v3[5] = sub_401172(v4);
  v3[3] = a2 | 0xF;
  if ( (a2 | 0xFu) > v3[6] )
    return v3[6];
  v3[1] = *(_DWORD *)(v3[5] + 24);
  if ( v3[1] > (unsigned int)(v3[6] - (v3[1] >> 1)) )
    return v3[6];
  v3[0] = v3[1] + (v3[1] >> 1);
  return *sub_4013C5(&v3[3], v3);
}
// 4013F2: using guessed type int __thiscall sub_4013F2(_DWORD);

//----- (00402CC0) --------------------------------------------------------
int __thiscall sub_402CC0(void *this, char *Str)
{
  void *v2; // eax
  size_t v4; // [esp-Ch] [ebp-24h]
  int v5; // [esp-4h] [ebp-1Ch]
  int v6; // [esp+4h] [ebp-14h]

  v6 = sub_401172(this);
  v5 = sub_4010C3(Str);
  v4 = *(_DWORD *)(v6 + 20);
  v2 = (void *)sub_40105A(v6);
  return sub_4013D4(v2, v4, Str, v5);
}
// 40105A: using guessed type int __thiscall sub_40105A(_DWORD);

//----- (00402D70) --------------------------------------------------------
_DWORD *__thiscall sub_402D70(void *this)
{
  int v1; // eax
  void **v2; // eax
  _DWORD *result; // eax
  int v4[3]; // [esp+0h] [ebp-10h] BYREF
  void *v5; // [esp+Ch] [ebp-4h]

  memset(v4, 204, sizeof(v4));
  v5 = this;
  v1 = sub_4012A3(this);
  sub_401325((char *)&v4[1] + 3, v1);
  sub_40137F(v5, v4[0], v4[1], v4[2]);
  sub_401447(v5);
  sub_401370();
  v2 = (void **)sub_401447(v5);
  sub_4011EA((int)&v4[1] + 3, *v2);
  result = (_DWORD *)sub_401447(v5);
  *result = 0;
  return result;
}
// 4012A3: using guessed type int __thiscall sub_4012A3(_DWORD);
// 40137F: using guessed type int __thiscall sub_40137F(_DWORD, _DWORD, _DWORD, _DWORD);
// 401447: using guessed type int __thiscall sub_401447(_DWORD);

//----- (00402E60) --------------------------------------------------------
int __thiscall sub_402E60(void *this)
{
  return sub_4010BE(this);
}
// 4010BE: using guessed type int __cdecl sub_4010BE(_DWORD);

//----- (00402E90) --------------------------------------------------------
int __thiscall sub_402E90(void *this)
{
  return sub_4013AC(this);
}
// 4013AC: using guessed type int __cdecl sub_4013AC(_DWORD);

//----- (00402EC0) --------------------------------------------------------
void *__thiscall sub_402EC0(void *this)
{
  return this;
}

//----- (00402EE0) --------------------------------------------------------
void *__thiscall sub_402EE0(void *this)
{
  return this;
}

//----- (00402F00) --------------------------------------------------------
void *__thiscall sub_402F00(void *this)
{
  return this;
}

//----- (00402F20) --------------------------------------------------------
void *__thiscall sub_402F20(void *this)
{
  return this;
}

//----- (00402F40) --------------------------------------------------------
void *__thiscall sub_402F40(void *this)
{
  return sub_40121C(this);
}

//----- (00402F70) --------------------------------------------------------
void *__thiscall sub_402F70(void *this)
{
  return sub_401118(this);
}

//----- (00402FA0) --------------------------------------------------------
bool __thiscall sub_402FA0(_DWORD *this)
{
  return *(this + 6) >= 0x10u;
}

//----- (00402FF0) --------------------------------------------------------
int __thiscall sub_402FF0(void *this)
{
  return sub_4013B6(this);
}
// 4013B6: using guessed type int __thiscall sub_4013B6(_DWORD);

//----- (00403020) --------------------------------------------------------
_DWORD *__thiscall sub_403020(_DWORD *this)
{
  _DWORD *v2; // [esp+0h] [ebp-8h]

  v2 = this + 1;
  if ( sub_40135C(this) )
    return (_DWORD *)j_unknown_libname_3(*(this + 1));
  return v2;
}
// 401389: using guessed type _DWORD __cdecl j_unknown_libname_3(_DWORD);

//----- (00403090) --------------------------------------------------------
_DWORD *__thiscall sub_403090(_DWORD *this)
{
  _DWORD *v2; // [esp+0h] [ebp-8h]

  v2 = this + 1;
  if ( sub_40135C(this) )
    return (_DWORD *)j_unknown_libname_3(*(this + 1));
  return v2;
}
// 401389: using guessed type _DWORD __cdecl j_unknown_libname_3(_DWORD);

//----- (00403100) --------------------------------------------------------
int __thiscall sub_403100(void *this)
{
  sub_4013B6(this);
  return sub_40129E(this);
}
// 4013B6: using guessed type int __thiscall sub_4013B6(_DWORD);

//----- (00403140) --------------------------------------------------------
void __thiscall sub_403140(_DWORD *this)
{
  int i; // [esp+8h] [ebp-20h]
  _DWORD v2[2]; // [esp+10h] [ebp-18h] BYREF
  _DWORD *v3; // [esp+18h] [ebp-10h]

  v2[0] = -858993460;
  v2[1] = -858993460;
  v3 = this;
  if ( *this )
  {
    std::_Lockit::_Lockit((std::_Lockit *)v2, 3);
    for ( i = *v3 + 4; *(_DWORD *)i; *(_DWORD *)i = *(_DWORD *)(*(_DWORD *)i + 4) )
      **(_DWORD **)i = 0;
    *(_DWORD *)(*v3 + 4) = 0;
    std::_Lockit::~_Lockit((std::_Lockit *)v2);
  }
}
// 40E098: using guessed type void __thiscall std::_Lockit::~_Lockit(std::_Lockit *__hidden this);
// 40E0A0: using guessed type _DWORD __thiscall std::_Lockit::_Lockit(std::_Lockit *__hidden this, _DWORD);

//----- (00403270) --------------------------------------------------------
int __thiscall sub_403270(void *this)
{
  void *v2[2]; // [esp+0h] [ebp-14h] BYREF
  void *v3; // [esp+8h] [ebp-Ch]
  _DWORD *v4; // [esp+Ch] [ebp-8h]
  void *v5; // [esp+10h] [ebp-4h]

  v5 = this;
  sub_40137F(this, -858993460, -858993460, -858993460);
  v4 = (_DWORD *)sub_4013B6(v5);
  if ( sub_40135C(v4) )
  {
    v3 = (void *)v4[1];
    v2[1] = (void *)sub_4012A3(v5);
    j_unknown_libname_5(v4 + 1);
    sub_401069();
    sub_4013E3(v3, v4[6] + 1);
  }
  v4[5] = 0;
  v4[6] = 15;
  HIBYTE(v2[0]) = 0;
  return j_unknown_libname_9(v4 + 1, (char *)v2 + 3);
}
// 401235: using guessed type _DWORD __cdecl j_unknown_libname_5(_DWORD);
// 4012A3: using guessed type int __thiscall sub_4012A3(_DWORD);
// 401320: using guessed type _DWORD __cdecl j_unknown_libname_9(_DWORD, _DWORD);
// 40137F: using guessed type int __thiscall sub_40137F(_DWORD, _DWORD, _DWORD, _DWORD);
// 4013B6: using guessed type int __thiscall sub_4013B6(_DWORD);

//----- (00403370) --------------------------------------------------------
int __thiscall sub_403370(void *this)
{
  int v2; // [esp+0h] [ebp-Ch] BYREF
  int v3; // [esp+4h] [ebp-8h]
  void *v4; // [esp+8h] [ebp-4h]

  v4 = this;
  v3 = sub_4013B6(this);
  *(_DWORD *)(v3 + 20) = 0;
  *(_DWORD *)(v3 + 24) = 15;
  HIBYTE(v2) = 0;
  return j_unknown_libname_9(v3 + 4, (char *)&v2 + 3);
}
// 401320: using guessed type _DWORD __cdecl j_unknown_libname_9(_DWORD, _DWORD);
// 4013B6: using guessed type int __thiscall sub_4013B6(_DWORD);

//----- (00403400) --------------------------------------------------------
void __noreturn sub_403400()
{
  std::_Xlength_error("string too long");
}
// 403400: using guessed type void __noreturn sub_403400();

//----- (00403440) --------------------------------------------------------
int __stdcall sub_403440(int a1)
{
  size_t v1; // eax

  v1 = j_unknown_libname_2(a1);
  return std::_Allocate<8,std::_Default_allocate_traits,0>(v1);
}
// 40133E: using guessed type _DWORD __cdecl j_unknown_libname_2(_DWORD);

//----- (00403480) --------------------------------------------------------
int __stdcall sub_403480(unsigned int a1)
{
  size_t v1; // eax

  v1 = sub_4011C7(a1);
  return std::_Allocate<8,std::_Default_allocate_traits,0>(v1);
}

//----- (004034C0) --------------------------------------------------------
int __stdcall sub_4034C0(char *Str)
{
  int v1; // eax
  size_t v2; // eax

  v1 = sub_4010C3(Str);
  v2 = j_unknown_libname_1(v1);
  return sub_4013A7(Str, v2);
}
// 401177: using guessed type _DWORD __cdecl j_unknown_libname_1(_DWORD);

//----- (00403510) --------------------------------------------------------
void *__thiscall sub_403510(void *this, void *Src, size_t Size)
{
  void *v4[3]; // [esp+0h] [ebp-10h] BYREF
  void *v5; // [esp+Ch] [ebp-4h]

  memset(v4, 204, sizeof(v4));
  v5 = this;
  v4[2] = (void *)sub_4013B6(this);
  if ( Size > *((_DWORD *)v4[2] + 6) )
    return (void *)sub_401267(Size, 0, Src);
  v4[1] = sub_401140((_DWORD *)v4[2]);
  *((_DWORD *)v4[2] + 5) = Size;
  sub_401055(v4[1], Src, Size);
  HIBYTE(v4[0]) = 0;
  j_unknown_libname_9((char *)v4[1] + Size, (char *)v4 + 3);
  return v5;
}
// 401320: using guessed type _DWORD __cdecl j_unknown_libname_9(_DWORD, _DWORD);
// 4013B6: using guessed type int __thiscall sub_4013B6(_DWORD);

//----- (00403600) --------------------------------------------------------
int __thiscall sub_403600(void *this)
{
  int v1; // eax

  v1 = sub_401172(this);
  return sub_40105A(v1);
}
// 40105A: using guessed type int __thiscall sub_40105A(_DWORD);

//----- (00403670) --------------------------------------------------------
int __cdecl sub_403670(void *Buf1, void *Buf2, size_t Size)
{
  return memcmp(Buf1, Buf2, Size);
}

//----- (004036A0) --------------------------------------------------------
void *__cdecl sub_4036A0(void *a1, void *Src, size_t Size)
{
  return memcpy(a1, Src, Size);
}

//----- (004036D0) --------------------------------------------------------
int __cdecl sub_4036D0(int a1, void *a2, int a3)
{
  return std::_Deallocate<8,0>(a2, 8 * a3);
}

//----- (00403700) --------------------------------------------------------
int __stdcall sub_403700(void *a1, int a2)
{
  return std::_Deallocate<8,0>(a1, a2);
}

//----- (00403740) --------------------------------------------------------
int __thiscall sub_403740(int this)
{
  char v1; // al

  v1 = sub_4010EB((void *)(this + 4));
  return sub_401041("animal: %s\n", v1);
}

//----- (00403790) --------------------------------------------------------
int __thiscall sub_403790(int this)
{
  char v1; // al

  v1 = sub_4010EB((void *)(this + 4));
  return sub_401041("bear: %s\n", v1);
}

//----- (004037E0) --------------------------------------------------------
int __thiscall sub_4037E0(int this)
{
  char v1; // al

  v1 = sub_4010EB((void *)(this + 4));
  return sub_401041("cat: %s\n", v1);
}

//----- (00403830) --------------------------------------------------------
size_t __cdecl sub_403830(char *Str)
{
  return strlen(Str);
}

//----- (00403870) --------------------------------------------------------
int __thiscall sub_403870(void *this)
{
  void *v1; // eax
  _DWORD v3[8]; // [esp+0h] [ebp-20h] BYREF

  memset(v3, 204, 28);
  v3[7] = this;
  v1 = sub_4012E4(this);
  v3[5] = std::numeric_limits<unsigned int>::max(v1);
  v3[2] = 16;
  v3[3] = *sub_4013C5(&v3[5], &v3[2]);
  v3[0] = j_unknown_libname_10(v3[0], v3[3] - 1);
  return *sub_40141A(v3, &v3[1]);
}
// 401109: using guessed type int __cdecl std::numeric_limits<unsigned int>::max(_DWORD);
// 4013CA: using guessed type int __cdecl j_unknown_libname_10(_DWORD, _DWORD);

//----- (00403960) --------------------------------------------------------
int __fastcall sub_403960(char a1)
{
  return sub_401041("meow\n", a1);
}

//----- (004039A0) --------------------------------------------------------
void *__cdecl sub_4039A0(void *a1, void *Src, size_t Size)
{
  return memmove(a1, Src, Size);
}

//----- (004039D0) --------------------------------------------------------
int __fastcall sub_4039D0(char a1)
{
  return sub_401041("roar\n", a1);
}

//----- (00403A10) --------------------------------------------------------
void *sub_403A10()
{
  return &unk_40D320;
}

//----- (00403A20) --------------------------------------------------------
int __cdecl sub_403A20(FILE *Stream, char *Format, _locale_t Locale, va_list ArgList)
{
  unsigned __int64 *v4; // eax

  v4 = (unsigned __int64 *)sub_4011C2();
  return __stdio_common_vfprintf(*v4, Stream, Format, Locale, ArgList);
}

//----- (00403A70) --------------------------------------------------------
int sub_403A70(char *Format, ...)
{
  FILE *v1; // eax
  va_list va; // [esp+1Ch] [ebp+Ch] BYREF

  va_start(va, Format);
  v1 = __acrt_iob_func(1u);
  return sub_401203(v1, Format, 0, va);
}

//----- (00403B60) --------------------------------------------------------
void __cdecl sub_403B60(void *a1)
{
  operator delete(a1);
}

//----- (00403DD0) --------------------------------------------------------
void *sub_403DD0()
{
  return &CrtDbgReportW;
}

//----- (00403E40) --------------------------------------------------------
_DWORD *__thiscall sub_403E40(_DWORD *this)
{
  *this = &type_info::`vftable';
  return this;
}
// 40AE64: using guessed type void *type_info::`vftable';

//----- (00403E60) --------------------------------------------------------
_DWORD *__thiscall sub_403E60(_DWORD *this, char a2)
{
  sub_40122B(this);
  if ( (a2 & 1) != 0 )
    sub_401280(this);
  return this;
}

//----- (00404270) --------------------------------------------------------
errno_t sub_404270()
{
  _crt_argv_mode startup_argv_mode; // eax

  startup_argv_mode = j___get_startup_argv_mode();
  return configure_narrow_argv(startup_argv_mode);
}

//----- (00404290) --------------------------------------------------------
int sub_404290()
{
  return initialize_narrow_environment();
}

//----- (00404370) --------------------------------------------------------
std::exception *__thiscall sub_404370(std::exception *this, struct std::exception *a2)
{
  std::exception::exception(this, a2);
  *(_DWORD *)this = &std::bad_alloc::`vftable';
  return this;
}
// 40AE98: using guessed type void *std::bad_alloc::`vftable';

//----- (004043A0) --------------------------------------------------------
std::exception *__thiscall sub_4043A0(std::exception *this)
{
  std::exception::exception(this, "bad allocation", 1);
  *(_DWORD *)this = &std::bad_alloc::`vftable';
  return this;
}
// 40AE98: using guessed type void *std::bad_alloc::`vftable';

//----- (004043D0) --------------------------------------------------------
_DWORD *__thiscall sub_4043D0(_DWORD *this, struct std::exception *a2)
{
  sub_401460(a2);
  *this = &std::bad_array_new_length::`vftable';
  return this;
}
// 40AEBC: using guessed type void *std::bad_array_new_length::`vftable';

//----- (004044E0) --------------------------------------------------------
int __thiscall sub_4044E0(void *this)
{
  return j_unknown_libname_15(this, this);
}
// 4013DE: using guessed type int __thiscall j_unknown_libname_15(_DWORD, _DWORD);

//----- (00404530) --------------------------------------------------------
void *__thiscall sub_404530(void *this, char a2)
{
  void *v3; // [esp+0h] [ebp-4h]

  j_unknown_libname_15(this, this);
  if ( (a2 & 1) != 0 )
    sub_401280(v3);
  return v3;
}
// 40454D: variable 'v3' is possibly undefined
// 4013DE: using guessed type int __thiscall j_unknown_libname_15(_DWORD, _DWORD);

//----- (00404570) --------------------------------------------------------
void *__thiscall sub_404570(void *this, char a2)
{
  sub_4011F9(this);
  if ( (a2 & 1) != 0 )
    sub_401280(this);
  return this;
}

//----- (004045F0) --------------------------------------------------------
void __noreturn sub_4045F0()
{
  _BYTE pExceptionObject[12]; // [esp+0h] [ebp-Ch] BYREF

  sub_401406((std::exception *)pExceptionObject);
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
}
// 4045F0: using guessed type void __noreturn sub_4045F0();

//----- (00404620) --------------------------------------------------------
void __noreturn sub_404620()
{
  _BYTE pExceptionObject[12]; // [esp+0h] [ebp-Ch] BYREF

  std::bad_array_new_length::bad_array_new_length((std::bad_array_new_length *)pExceptionObject);
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVbad_array_new_length_std__);
}
// 404620: using guessed type void __noreturn sub_404620();

//----- (00405310) --------------------------------------------------------
int sub_405310()
{
  return dword_40D6EC;
}
// 40D6EC: using guessed type int dword_40D6EC;

//----- (00405320) --------------------------------------------------------
int sub_405320()
{
  return dword_40D6F0;
}
// 40D6F0: using guessed type int dword_40D6F0;

//----- (00405390) --------------------------------------------------------
int __cdecl sub_405390(int a1)
{
  int result; // eax

  result = dword_40D6F0;
  dword_40D6F0 = a1;
  dword_40D6EC = 0;
  return result;
}
// 40D6EC: using guessed type int dword_40D6EC;
// 40D6F0: using guessed type int dword_40D6F0;

//----- (00405DF0) --------------------------------------------------------
void sub_405DF0()
{
  InitializeSListHead(&ListHead);
}

//----- (00405E70) --------------------------------------------------------
void sub_405E70()
{
  ;
}

//----- (00405E80) --------------------------------------------------------
void sub_405E80()
{
  ;
}

//----- (00405E90) --------------------------------------------------------
void *sub_405E90()
{
  return &unk_40D738;
}

//----- (00405F20) --------------------------------------------------------
void *sub_405F20()
{
  return &unk_40D768;
}

//----- (00405F30) --------------------------------------------------------
void *sub_405F30()
{
  return &unk_40D75C;
}

//----- (00406120) --------------------------------------------------------
int sub_406120()
{
  return j____scrt_stub_for_initialize_mta_4();
}
// 40143D: using guessed type int j____scrt_stub_for_initialize_mta_4(void);

//----- (004061F0) --------------------------------------------------------
LPTOP_LEVEL_EXCEPTION_FILTER sub_4061F0()
{
  return SetUnhandledExceptionFilter(TopLevelExceptionFilter);
}

//----- (004062C0) --------------------------------------------------------
void *sub_4062C0()
{
  _DWORD *v0; // esi
  void *result; // eax

  v0 = &unk_40C120;
  result = &unk_40C120;
  if ( &unk_40C120 < (_UNKNOWN *)dword_40C324 )
  {
    do
    {
      if ( *v0 )
        result = (void *)((int (__thiscall *)(_DWORD))*v0)(*v0);
      ++v0;
    }
    while ( v0 < dword_40C324 );
  }
  return result;
}
// 40C324: using guessed type _DWORD dword_40C324[66];

//----- (00406300) --------------------------------------------------------
void *sub_406300()
{
  _DWORD *v0; // esi
  void *result; // eax

  v0 = &unk_40C42C;
  result = &unk_40C42C;
  if ( &unk_40C42C < (_UNKNOWN *)dword_40C630 )
  {
    do
    {
      if ( *v0 )
        result = (void *)((int (__thiscall *)(_DWORD))*v0)(*v0);
      ++v0;
    }
    while ( v0 < dword_40C630 );
  }
  return result;
}
// 40C630: using guessed type _DWORD dword_40C630[66];

//----- (004063A0) --------------------------------------------------------
int __cdecl sub_4063A0(int a1)
{
  return j_unknown_libname_14(a1);
}
// 401019: using guessed type _DWORD __cdecl j_unknown_libname_14(_DWORD);

// nfuncs=498 queued=106 decompiled=106 lumina nreq=0 worse=0 better=0
// ALL OK, 106 function(s) have been successfully decompiled
